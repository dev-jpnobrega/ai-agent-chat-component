import{r as e,c as t,h as a}from"./p-1d6ea7ff.js";class s extends Error{constructor(e){const t=e.cause?e.cause:e;let{message:a,code:s}=t;if(e.name==="AbortError"){a="Request timeout";s="ETIMEDOUT"}super(a);this.name=t.name;this.code=s;this.originalStack=t.stack}}function n({timeout:e,abortController:t=new AbortController}){let a=null;const{signal:s}=t;if(e){a=setTimeout((()=>{t.abort()}),e)}return{signal:s,timeoutId:a}}function i(e){try{return JSON.parse(e)}catch(t){return e}}async function o(e,t){const a=t?e.body:i(await e.text());const s={};Array.from(e.headers.keys()).forEach((t=>{s[t]=e.headers.get(t)}));const n={body:a,response:{body:a,headers:s,ok:e.ok,statusCode:e.status,statusText:e.statusText}};return e.ok?n:Promise.reject(n)}async function r(e={},t=false){try{const a=n(e);const s=Object.assign({"Content-Type":"application/json"},e.headers);const i=new URL(e.uri);const{params:r={}}=e;Object.keys(r).forEach((e=>{i.searchParams.append(e,r[e])}));const d=await fetch(i,Object.assign(Object.assign({},e),{body:JSON.stringify(e.body),headers:s,signal:a.signal}));clearTimeout(a.timeoutId);return o(d,t)}catch(e){const t=new s(e);console.error({details:t,error:t.name,message:`[COMMONS-FETCH-REQUEST]-ERROR: ${t.name} - ${t.message}`});throw t}}class d{constructor(e){this.settings=e}async send(e,t,a){try{const s=await r({method:`POST`,uri:`${this.settings.url}/workout/v1/chat`,body:{body:{id:t,agentUid:a,userId:"currentUser",messages:[e]}}});return s.body}catch(e){console.error(e)}}}class l{static async fetchTranslations(e=`en`){const t=JSON.parse(sessionStorage.getItem(`i18n.${e}`));if(t&&Object.keys(t).length>0){return t}try{const t=await fetch(`/assets/translate/${e}.json`);if(t.ok){const a=await t.json();sessionStorage.setItem(`i18n.${e}`,JSON.stringify(a));return a}}catch(t){console.error(`Error loading locale: ${e}`,t)}}}const c='*,*::before,*::after{box-sizing:border-box}html,body{height:100%}body{background:linear-gradient(135deg, #044f48, #2a7561);background-size:cover;font-family:"Segoe UI, Helvetica Neue, Helvetica, Lucida Grande, Arial, Ubuntu, Cantarell, Fira Sans", sans-serif;font-size:12px;line-height:1.3;overflow:hidden}.bg{width:100%;height:100%;top:0;left:0;z-index:1;filter:blur(80px);transform:scale(1.2)}.chat{font-family:"Segoe UI, Helvetica Neue, Helvetica, Lucida Grande, Arial, Ubuntu, Cantarell, Fira Sans", sans-serif;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:300px;height:80vh;max-height:500px;overflow:hidden;box-shadow:0 5px 30px rgba(0, 0, 0, 0.2);background:url("https://cloudfronttestebucket.s3.amazonaws.com/bg.png") no-repeat 0 0;border-radius:20px;display:flex;justify-content:space-between;flex-direction:column}.chat-title{flex:0 1 45px;position:relative;z-index:2;background:#F0F2F5;color:#000;text-align:left;padding:10px 10px 10px 50px}.chat-title h1,.chat-title h2{font-weight:normal;font-size:10px;margin:0;padding:1px}.chat-title h2{color:rgb(99, 95, 95);font-size:8px;margin-top:1px}.chat-title .avatar{position:absolute;z-index:1;top:8px;left:9px;border-radius:30px;width:30px;height:30px;overflow:hidden;margin:0;padding:0;border:2px solid rgba(255, 255, 255, 0.24)}.chat-title .avatar img{width:100%;height:100%}.messages{flex:1 1 auto;overflow:auto;position:relative;width:100%}.messages .messages-content{position:absolute;top:0;left:0;height:101%;width:100%}.messages .message{clear:both;float:left;padding:6px 10px 7px;border-radius:10px 10px 10px 0;background:rgb(255, 255, 255);margin:8px 0;font-size:11px;line-height:1.4;margin-left:35px;position:relative}.messages .message .timestamp{float:right;align-content:end;bottom:-15px;font-size:9px;z-index:3;color:rgba(2, 2, 2, 0.3)}.messages .message::before{content:"";position:absolute;bottom:-6px;border-top:6px solid rgb(255, 255, 255);left:0;border-right:7px solid transparent}.messages .message .avatar{position:absolute;z-index:1;bottom:-15px;left:-35px;border-radius:30px;width:30px;height:30px;overflow:hidden;margin:0;padding:0}.messages .message .avatar img{width:100%;height:90%}.messages .message.message-personal{float:right;text-align:right;background:linear-gradient(120deg, #E1F6CA, #E1F6CA);border-radius:10px 10px 0 10px}.messages .message.message-personal::before{left:auto;right:0;border-right:none;border-left:5px solid transparent;border-top:4px solid #E1F6CA;bottom:-4px}.messages .message:last-child{margin-bottom:30px}.messages .message.new{transform:scale(0);transform-origin:0 0;animation:bounce 500ms linear both}.messages .message.loading::before{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);content:"";display:block;width:3px;height:3px;border-radius:50%;background:rgba(0, 0, 0, 0.5);z-index:2;margin-top:4px;animation:ball 0.45s cubic-bezier(0, 0, 0.15, 1) alternate infinite;border:none;animation-delay:0.15s}.messages .message.loading span{display:block;font-size:0;width:20px;height:10px;position:relative}.messages .message.loading span::before{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);content:"";display:block;width:3px;height:3px;border-radius:50%;background:rgba(0, 0, 0, 0.5);z-index:2;margin-top:4px;animation:ball 0.45s cubic-bezier(0, 0, 0.15, 1) alternate infinite;margin-left:-7px}.messages .message.loading span::after{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);content:"";display:block;width:3px;height:3px;border-radius:50%;background:rgba(0, 0, 0, 0.5);z-index:2;margin-top:4px;animation:ball 0.45s cubic-bezier(0, 0, 0.15, 1) alternate infinite;margin-left:7px;animation-delay:0.3s}.message-box{flex:0 1 40px;width:100%;background:#F0F2F5;padding:10px;position:relative}.message-box .message-input{background:none;border:none;outline:none !important;resize:none;color:rgb(12, 12, 12);font-size:11px;height:17px;margin:0;padding-right:20px;width:265px}.message-box textarea:focus:-webkit-placeholder{color:transparent}.message-box .message-submit{position:absolute;z-index:1;top:9px;right:10px;color:#fff;border:none;background:#248A52;font-size:10px;text-transform:uppercase;line-height:1;padding:6px 10px;border-radius:10px;outline:none !important;transition:background 0.2s ease}.message-box .message-submit:hover{background:#1D7745}.message-box .message-submit:disabled{position:absolute;z-index:1;top:9px;right:10px;color:#fff;border:none;background:#CCCCCC;font-size:10px;text-transform:uppercase;line-height:1;padding:6px 10px;border-radius:10px}::-webkit-scrollbar{width:0.3em;opacity:0}::-webkit-scrollbar-track{box-shadow:inset 0 0 5px #F0F2F5;opacity:0}::-webkit-scrollbar-thumb{background-color:rgba(192, 185, 185, 0.5) !important;opacity:0}::-webkit-scrollbar-thumb:hover{background-color:rgba(192, 185, 185, 0.5) !important;margin:1px -3px 1px 0;opacity:0}.mCSB_scrollTools{margin:1px -3px 1px 0;opacity:0}.mCSB_inside>.mCSB_container{margin-right:0px;padding:0 10px}.mCSB_scrollTools .mCSB_dragger .mCSB_dragger_bar{background-color:rgba(192, 185, 185, 0.5) !important}@keyframes bounce{0%{transform:matrix3d(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)}4.7%{transform:matrix3d(0.45, 0, 0, 0, 0, 0.45, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)}9.41%{transform:matrix3d(0.883, 0, 0, 0, 0, 0.883, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)}14.11%{transform:matrix3d(1.141, 0, 0, 0, 0, 1.141, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)}18.72%{transform:matrix3d(1.212, 0, 0, 0, 0, 1.212, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)}24.32%{transform:matrix3d(1.151, 0, 0, 0, 0, 1.151, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)}29.93%{transform:matrix3d(1.048, 0, 0, 0, 0, 1.048, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)}35.54%{transform:matrix3d(0.979, 0, 0, 0, 0, 0.979, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)}41.04%{transform:matrix3d(0.961, 0, 0, 0, 0, 0.961, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)}52.15%{transform:matrix3d(0.991, 0, 0, 0, 0, 0.991, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)}63.26%{transform:matrix3d(1.007, 0, 0, 0, 0, 1.007, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)}85.49%{transform:matrix3d(0.999, 0, 0, 0, 0, 0.999, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)}100%{transform:matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)}}@keyframes ball{from{transform:translateY(0) scaleY(0.8)}to{transform:translateY(-10px)}}';const g=c;const p=({content:e,date:t,sender:s,loading:n})=>{const i=t.getHours()+":"+t.getMinutes();const o=e=>{var t;return a("div",{class:"message message-personal new"},a("div",{innerHTML:((t=e.content)===null||t===void 0?void 0:t.replace(/(?:\r\n|\r|\n)/g,"<br>"))||""},a("span",null)),a("div",{class:"timestamp"},i))};const r=e=>{var t;return a("div",{class:`message ${!e.loading||`loading`} new`},a("figure",{class:"avatar"},a("img",{src:"https://cloudfronttestebucket.s3.amazonaws.com/agent.jpg"})),a("div",{innerHTML:((t=e.content)===null||t===void 0?void 0:t.replace(/(?:\r\n|\r|\n)/g,"<br>"))||""},a("span",null)),a("div",{class:"timestamp"},i))};return s===`AI`?r({content:e,date:t,sender:s,loading:n}):o({content:e,date:t,sender:s,loading:n})};const b=({messages:e})=>a("div",{class:"messages-content"},e.map((e=>a(p,{content:e.content,date:e.date,sender:e.sender,loading:e.loading}))));const m=new d({url:"https://ai-enterprise-api.azurewebsites.net",key:"my-key"});const h=class{constructor(s){e(this,s);this.send=t(this,"send",7);this.receiver=t(this,"receiver",7);this.renderMessages=e=>a(b,{messages:e});this.messagesContainer=null;this.greetings=undefined;this.identifier=undefined;this.chatUid=undefined;this.language=undefined;this.translations=undefined;this.messages=[];this.content="";this.disableSend=true}async componentWillLoad(){const e=Math.random().toString(36).substring(7);this.translations=await l.fetchTranslations(this.language);this.receiver.emit({id:e,content:undefined,date:new Date,loading:true,sender:"AI"});m.send({content:this.greetings||"Hi"},this.chatUid||"1",this.identifier).then((t=>{this.receiver.emit({id:e,content:t,date:new Date,loading:false,sender:"AI"});this.disableSend=false})).catch((e=>{console.error(e)}))}componentDidRender(){this.onScroll(null)}sendHandler(e){const t=e.detail;this.disableSend=true;this.receiver.emit(Object.assign({},t));const a=Math.random().toString(36).substring(7);this.receiver.emit({id:a,date:new Date,loading:true,sender:"AI"});m.send(t,this.chatUid||"1",this.identifier).then((e=>{this.receiver.emit({id:a,content:e,date:new Date,loading:false,sender:"AI"});this.disableSend=false})).catch((e=>{console.error(e)}))}receiverHandler(e){const t=e.detail;this.messages=[...this.messages.filter((e=>e.id!==t.id)),t]}handleKeyDown(e){if(e.key==="Enter"&&!this.disableSend){this.handleSend(e)}}handleSend(e){e.preventDefault();if(!this.content)return;this.send.emit({id:Math.random().toString(36).substring(7),content:this.content,date:new Date,loading:false,sender:"USER"});this.content=""}handleChange(e){this.content=e.target.value}onScroll(e){if(this.messagesContainer){this.messagesContainer.scrollTo({top:this.messagesContainer.scrollHeight,behavior:"smooth"})}}render(){return a("div",{key:"d085f63587c980ac8fe67f61aa6bc5a149625934"},a("div",{key:"8c8697ff0a6b5875ec0d53421ed0c167e5b2701e",class:"chat"},a("div",{key:"fbaa4b76fb5c07c92fd298993d387f124544195b",class:"chat-title"},a("h1",{key:"35133c0b8172e0ae9c85170af445f7b8e7b99b93"},"GSP Ada"),a("h2",{key:"926b8218e5cdab32b2cbb2a55b77089d164553fb"},"BOT Global Sales Plataform"),a("figure",{key:"ee1997d0cb033190830c3d5213bb28f6d9f944b2",class:"avatar"},a("img",{key:"e5a9348343c01a2b39a4020a0c9585f431bed000",src:"https://cloudfronttestebucket.s3.amazonaws.com/agent.jpg"}))),a("div",{key:"79142e6a156c48970c2b6001507a69d98b74341b",class:"messages",ref:e=>this.messagesContainer=e},this.renderMessages(this.messages)),a("div",{key:"17d7360f5a1ac3e94ab36f14da8a477a590bba71",class:"message-box"},a("textarea",{key:"83008d3c1c7073488102e54f5480dbc8f54bcfb6",typeof:"text",value:this.content,onInput:e=>this.handleChange(e),class:"message-input",placeholder:this.translations["text.placeholder"]}),a("button",{key:"14ade64177b72f9202bc885311558fa4ec57c739",disabled:this.disableSend,type:"submit",class:"message-submit",onClick:e=>this.handleSend(e)},this.translations["button.send"]))),a("div",{key:"1f8a241112c930603d3bb57f229d8138a70f7d9f",class:"bg"}))}};h.style=g;export{h as chat_component};
//# sourceMappingURL=p-45ccbf50.entry.js.map